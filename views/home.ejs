<%- include("partials/header.ejs") %>
<body>
  <%- include("partials/nav_bar.ejs") %>

  <div class="container mt-4">

    <h1 class="mb-4">Dashboard</h1>

    <!-- ============================================
         MACRO TRACKER SECTION
    ============================================= -->
    <section class="mb-5">
      <h2>Macro Tracker</h2>

      <!-- Add Food Form -->
      <form action="/addFood" method="POST" class="mb-3">
        <div class="row g-3">

          <div class="col-md-3">
            <input type="text" name="foodName" class="form-control" placeholder="Food Name">
          </div>

          <div class="col-md-2">
            <input type="number" name="calories" class="form-control" placeholder="Calories" step="0.01">
          </div>

          <div class="col-md-2">
            <select name="mealType" class="form-select">
              <option>Breakfast</option>
              <option>Lunch</option>
              <option>Dinner</option>
              <option>Snack</option>
            </select>
          </div>

          <div class="col-md-3">
            <!-- DATE PICKER -->
            <input type="date" name="entryDate" class="form-control" >
          </div>

          <div class="col-md-2">
            <button class="btn btn-success w-100">Add Food</button>
          </div>

        </div>
      </form>

      <!-- DISPLAY FOOD TABLE -->
      <table class="table table-dark table-striped mt-3">
        <thead>
          <tr>
            <th>Food</th>
            <th>Calories</th>
            <th>Meal</th>
            <th>Date</th>
          </tr>
        </thead>
        <tbody>
          <% if (foods && foods.length > 0) { %>
            <% foods.forEach(food => { %>
              <tr>
                <td><%= food.name %></td>
                <td><%= food.calories %></td>
                <td><%= food.mealType %></td>
                <td><%= food.entryDate.toISOString().split("T")[0] %></td>
              </tr>
            <% }) %>
          <% } else { %>
            <tr>
              <td colspan="4" class="text-center">No food entries yet.</td>
            </tr>
          <% } %>
        </tbody>
      </table>
    </section>


    <!-- ============================================
         GYM LOG SECTION
    ============================================= -->
    <section class="mt-5">
      <h2>Gym Log</h2>

      <!-- Add Gym Log Form -->
      <form action="/addGymLog" method="POST" class="mb-3">
        <div class="row g-3">

          <div class="col-md-3">
            <input type="text" name="exercise" class="form-control" placeholder="Exercise" >
          </div>

          <div class="col-md-2">
            <input type="number" name="weight" class="form-control" placeholder="Weight" step="0.01" >
          </div>

          <div class="col-md-2">
            <input type="number" name="reps" class="form-control" placeholder="Reps" >
          </div>

          <div class="col-md-3">
            <!-- DATE PICKER -->
            <input type="date" name="entryDate" class="form-control" >
          </div>

          <div class="col-md-2">
            <button class="btn btn-primary w-100">Add Log</button>
          </div>

        </div>
      </form>

      <!-- DISPLAY GYM TABLE -->
      <table class="table table-dark table-striped mt-3">
        <thead>
          <tr>
            <th>Exercise</th>
            <th>Weight</th>
            <th>Reps</th>
            <th>Date</th>
          </tr>
        </thead>
        <tbody>
          <% if (logs && logs.length > 0) { %>
            <% logs.forEach(log => { %>
              <tr>
                <td><%= log.exercise %></td>
                <td><%= log.weight %></td>
                <td><%= log.reps %></td>
                <td><%= log.entryDate.toISOString().split("T")[0] %></td>
              </tr>
            <% }) %>
          <% } else { %>
            <tr>
              <td colspan="4" class="text-center">No gym logs yet.</td>
            </tr>
          <% } %>
        </tbody>
      </table>
    </section>

  </div>

  <%- include("partials/footer.ejs") %>
</body>
